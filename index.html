<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8">
  <title>CallOfFree - Ø¨Ø§Ø²ÛŒ Ø±Ù‚Ø§Ø¨ØªÛŒ</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    body { font-family: sans-serif; background: #f0f0f0; padding: 20px; direction: rtl; }
    .section { background: white; padding: 15px; margin-bottom: 20px; border-radius: 10px; }
    .btn { background: #03a9f4; color: white; padding: 10px; border: none; border-radius: 5px; cursor: pointer; margin-top: 10px; }
    .game { margin-top: 10px; padding: 10px; border: 1px solid #ccc; border-radius: 8px; }
  </style>
</head>
<body>
  <h2>ğŸ® Ø¨Ø§Ø²ÛŒâ€ŒÙ‡Ø§ÛŒ Ø±Ù‚Ø§Ø¨ØªÛŒ CallOfFree</h2>

  <div class="section">
    <h3>ğŸ’° Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ø´Ù…Ø§: <span id="balance">5</span>$</h3>
  </div>

  <div class="section">
    <h3>ğŸ¯ Ø§Ù†ØªØ®Ø§Ø¨ Ø¨Ø§Ø²ÛŒ</h3>

    <div class="game">
      <strong>Ø¨Ø§Ø²ÛŒ Ø³Ù†Ú¯â€ŒÚ©Ø§ØºØ°â€ŒÙ‚ÛŒÚ†ÛŒ</strong><br>
      ÙˆØ±ÙˆØ¯ÛŒ: 1$ | Ø¬Ø§ÛŒØ²Ù‡ Ø¨Ø±Ù†Ø¯Ù‡: 2$<br>
      <button class="btn" onclick="startGame('Ø³Ù†Ú¯â€ŒÚ©Ø§ØºØ°â€ŒÙ‚ÛŒÚ†ÛŒ')">Ø´Ø±ÙˆØ¹ Ø¨Ø§Ø²ÛŒ</button>
    </div>

    <div class="game">
      <strong>Ø¨Ø§Ø²ÛŒ Ø­Ø¯Ø³ Ø¹Ø¯Ø¯</strong><br>
      ÙˆØ±ÙˆØ¯ÛŒ: 1$ | Ø¬Ø§ÛŒØ²Ù‡ Ø¨Ø±Ù†Ø¯Ù‡: 2$<br>
      <button class="btn" onclick="startGame('Ø­Ø¯Ø³ Ø¹Ø¯Ø¯')">Ø´Ø±ÙˆØ¹ Ø¨Ø§Ø²ÛŒ</button>
    </div>

    <div class="game">
      <strong>Ø¨Ø§Ø²ÛŒ Ø³Ø±Ø¹Øª Ú©Ù„ÛŒÚ©</strong><br>
      ÙˆØ±ÙˆØ¯ÛŒ: 1$ | Ø¬Ø§ÛŒØ²Ù‡ Ø¨Ø±Ù†Ø¯Ù‡: 2$<br>
      <button class="btn" onclick="startGame('Ø³Ø±Ø¹Øª Ú©Ù„ÛŒÚ©')">Ø´Ø±ÙˆØ¹ Ø¨Ø§Ø²ÛŒ</button>
    </div>
  </div>

  <div class="section" id="status" style="display:none;">
    <h3>â³ Ø¯Ø± Ø­Ø§Ù„ Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† Ø­Ø±ÛŒÙ...</h3>
    <p>Ø§Ú¯Ø± ØªØ§ Û³Û° Ø«Ø§Ù†ÛŒÙ‡ Ø­Ø±ÛŒÙÛŒ Ù¾ÛŒØ¯Ø§ Ù†Ø´Ø¯ØŒ Ù¾ÙˆÙ„ Ø´Ù…Ø§ Ø¨Ø±Ú¯Ø´Øª Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.</p>
  </div>

  <script>
    const tg = window.Telegram.WebApp;
    tg.expand();

    let balance = 5;
    let gameTimeout;

    function updateBalance() {
      document.getElementById("balance").innerText = balance;
    }

    function startGame(gameName) {
      if (balance < 1) {
        alert("Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ú©Ø§ÙÛŒ Ù†ÛŒØ³Øª!");
        return;
      }

      balance -= 1;
      updateBalance();
      tg.sendData("Ø´Ø±ÙˆØ¹ Ø¨Ø§Ø²ÛŒ: " + gameName);

      document.getElementById("status").style.display = "block";

      gameTimeout = setTimeout(() => {
        balance += 1;
        updateBalance();
        document.getElementById("status").style.display = "none";
        alert("â›” Ø­Ø±ÛŒÙÛŒ Ù¾ÛŒØ¯Ø§ Ù†Ø´Ø¯. Ù¾ÙˆÙ„ Ø¨Ø±Ú¯Ø´Øª Ø¯Ø§Ø¯Ù‡ Ø´Ø¯.");
        tg.sendData("Ø­Ø±ÛŒÙ Ù¾ÛŒØ¯Ø§ Ù†Ø´Ø¯ - Ù¾ÙˆÙ„ Ø¨Ø±Ú¯Ø´Øª Ø®ÙˆØ±Ø¯");
      }, 30000); // 30 Ø«Ø§Ù†ÛŒÙ‡
    }

    // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ù¾ÛŒØ¯Ø§ Ø´Ø¯Ù† Ø­Ø±ÛŒÙ Ùˆ Ù†ØªÛŒØ¬Ù‡ Ø¨Ø§Ø²ÛŒ
    setInterval(() => {
      if (document.getElementById("status").style.display === "block") {
        if (Math.random() > 0.7) { // Ø§Ø­ØªÙ…Ø§Ù„ Ù¾ÛŒØ¯Ø§ Ø´Ø¯Ù† Ø­Ø±ÛŒÙ
          clearTimeout(gameTimeout);
          document.getElementById("status").style.display = "none";
          const win = Math.random() > 0.5;
          if (win) {
            balance += 2;
            alert("ğŸ‰ Ø´Ù…Ø§ Ø¨Ø±Ù†Ø¯Ù‡ Ø´Ø¯ÛŒØ¯! +2$");
            tg.sendData("Ù†ØªÛŒØ¬Ù‡ Ø¨Ø§Ø²ÛŒ: Ø¨Ø±Ø¯");
          } else {
            alert("ğŸ˜¢ Ø´Ù…Ø§ Ø¨Ø§Ø®ØªÛŒØ¯.");
            tg.sendData("Ù†ØªÛŒØ¬Ù‡ Ø¨Ø§Ø²ÛŒ: Ø¨Ø§Ø®Øª");
          }
          updateBalance();
        }
      }
    }, 5000); // Ù‡Ø± Ûµ Ø«Ø§Ù†ÛŒÙ‡ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†
  </script>
</body>
</html>
